éå¸¸å¥½ï¼Œä»¥ä¸‹æ˜¯æ ¹æ“šä½ æƒ³é–‹ç™¼çš„è³¼ç‰©å•†åŸç³»çµ±åŠŸèƒ½ï¼Œè¨­è¨ˆçš„ä¸€ä»½**å®Œæ•´ ER æ¨¡å‹ï¼ˆEntity-Relationship è³‡æ–™è¡¨è¨­è¨ˆï¼‰**ï¼Œç‰¹åˆ¥é©ç”¨æ–¼ä½¿ç”¨ **Supabase / PostgreSQL** çš„ç³»çµ±ã€‚å®ƒæ¶µè“‹äº†å‰å°èˆ‡å¾Œå°æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½ï¼ŒåŒ…æ‹¬è³¼ç‰©ã€é‡‘æµã€å¾Œå°å ±è¡¨ç­‰ã€‚

---

## ğŸ§© ä¸€ã€ER è³‡æ–™è¡¨ç¸½è¦½

```
users
â”œâ”€â”€ orders
â”‚   â”œâ”€â”€ order_items
â”‚   â””â”€â”€ payments
products
â”œâ”€â”€ product_variants (å¯é¸)
â”œâ”€â”€ product_categories
â”œâ”€â”€ product_images
cart_items
admin_users
monthly_reports
```

---

## ğŸ“š äºŒã€è³‡æ–™è¡¨è©³ç´°è¨­è¨ˆ

---

### 1ï¸âƒ£ `users`ï¼ˆä½¿ç”¨è€…ï¼‰

| æ¬„ä½          | å‹åˆ¥        | èªªæ˜                     |
| ----------- | --------- | ---------------------- |
| id          | uuid      | ä¸»éµï¼ˆSupabase Auth è‡ªå‹•ç”¢ç”Ÿï¼‰ |
| email       | text      | ç™»å…¥ç”¨ Email              |
| name        | text      | ä½¿ç”¨è€…åç¨±                  |
| created\_at | timestamp | è¨»å†Šæ™‚é–“                   |

---

### 2ï¸âƒ£ `products`ï¼ˆå•†å“ï¼‰

| æ¬„ä½           | å‹åˆ¥        | èªªæ˜         |
| ------------ | --------- | ---------- |
| id           | uuid      | ä¸»éµ         |
| name         | text      | å•†å“åç¨±       |
| description  | text      | å•†å“æè¿°       |
| price        | integer   | å”®åƒ¹ï¼ˆå–®ä½ï¼šå°å¹£åˆ†ï¼‰ |
| cost         | integer   | æˆæœ¬ï¼ˆç”¨æ–¼æ¯›åˆ©çµ±è¨ˆï¼‰ |
| stock        | integer   | åº«å­˜æ•¸é‡       |
| is\_active   | boolean   | æ˜¯å¦ä¸Šæ¶       |
| category\_id | uuid      | å¤–éµï¼ˆå°æ‡‰åˆ†é¡ï¼‰   |
| created\_at  | timestamp | å»ºç«‹æ™‚é–“       |

---

### 3ï¸âƒ£ `product_categories`ï¼ˆå•†å“åˆ†é¡ï¼‰

| æ¬„ä½   | å‹åˆ¥   | èªªæ˜   |
| ---- | ---- | ---- |
| id   | uuid | ä¸»éµ   |
| name | text | åˆ†é¡åç¨± |

---

### 4ï¸âƒ£ `product_images`ï¼ˆå•†å“åœ–ç‰‡ï¼‰

| æ¬„ä½          | å‹åˆ¥      | èªªæ˜                     |
| ----------- | ------- | ---------------------- |
| id          | uuid    | ä¸»éµ                     |
| product\_id | uuid    | å°æ‡‰å•†å“ ID                |
| image\_url  | text    | Supabase Storage çš„ URL |
| sort\_order | integer | æ’åºï¼ˆå¯é¸ï¼‰                 |

---

### 5ï¸âƒ£ `cart_items`ï¼ˆè³¼ç‰©è»Šé …ç›®ï¼‰

| æ¬„ä½          | å‹åˆ¥        | èªªæ˜    |
| ----------- | --------- | ----- |
| id          | uuid      | ä¸»éµ    |
| user\_id    | uuid      | å°æ‡‰ä½¿ç”¨è€… |
| product\_id | uuid      | å°æ‡‰å•†å“  |
| quantity    | integer   | æ•¸é‡    |
| created\_at | timestamp | åŠ å…¥æ™‚é–“  |

---

### 6ï¸âƒ£ `orders`ï¼ˆè¨‚å–®ï¼‰

| æ¬„ä½                | å‹åˆ¥        | èªªæ˜                                 |
| ----------------- | --------- | ---------------------------------- |
| id                | uuid      | ä¸»éµ                                 |
| user\_id          | uuid      | è¨‚è³¼è€…                                |
| status            | text      | ç‹€æ…‹ï¼ˆpending/paid/shipped/cancelledï¼‰ |
| total\_price      | integer   | è¨‚å–®ç¸½é‡‘é¡ï¼ˆå«é‹ï¼‰                          |
| shipping\_address | jsonb     | æ”¶ä»¶è³‡è¨Šï¼ˆåœ°å€ã€é›»è©±ï¼‰                        |
| created\_at       | timestamp | ä¸‹å–®æ™‚é–“                               |

---

### 7ï¸âƒ£ `order_items`ï¼ˆè¨‚å–®æ˜ç´°ï¼‰

| æ¬„ä½            | å‹åˆ¥      | èªªæ˜             |
| ------------- | ------- | -------------- |
| id            | uuid    | ä¸»éµ             |
| order\_id     | uuid    | å°æ‡‰è¨‚å–®           |
| product\_id   | uuid    | å•†å“ ID          |
| product\_name | text    | å‚™ä»½å•†å“åç¨±ï¼ˆé˜²æ­¢æ”¹åƒ¹å½±éŸ¿ï¼‰ |
| price         | integer | ç•¶æ™‚å”®åƒ¹           |
| quantity      | integer | æ•¸é‡             |

---

### 8ï¸âƒ£ `payments`ï¼ˆä»˜æ¬¾è¨˜éŒ„ï¼‰

| æ¬„ä½              | å‹åˆ¥        | èªªæ˜                       |
| --------------- | --------- | ------------------------ |
| id              | uuid      | ä¸»éµ                       |
| order\_id       | uuid      | å°æ‡‰è¨‚å–®                     |
| amount          | integer   | å¯¦éš›ä»˜æ¬¾é‡‘é¡                   |
| status          | text      | success / fail / pending |
| provider        | text      | TapPay / ç¶ ç•Œ / è—æ–°ç­‰        |
| transaction\_id | text      | ç¬¬ä¸‰æ–¹é‡‘æµçš„äº¤æ˜“ä»£ç¢¼               |
| paid\_at        | timestamp | ä»˜æ¬¾æ™‚é–“                     |

---

### 9ï¸âƒ£ `monthly_reports`ï¼ˆæ¯æœˆçµç®—å ±è¡¨ï¼‰

| æ¬„ä½             | å‹åˆ¥        | èªªæ˜           |
| -------------- | --------- | ------------ |
| id             | uuid      | ä¸»éµ           |
| month          | text      | "2025-07" æ ¼å¼ |
| total\_orders  | integer   | è©²æœˆè¨‚å–®æ•¸é‡       |
| total\_revenue | integer   | è©²æœˆç¸½ç‡Ÿæ”¶        |
| total\_refunds | integer   | è©²æœˆé€€æ¬¾ç¸½é¡       |
| total\_cost    | integer   | è©²æœˆéŠ·å”®å•†å“æˆæœ¬ç¸½å’Œ   |
| net\_income    | integer   | æ¯›åˆ©ï¼ˆç¸½æ”¶å…¥ - æˆæœ¬ï¼‰ |
| generated\_at  | timestamp | å ±è¡¨ç”¢ç”Ÿæ™‚é–“       |

---

### ğŸ” (å¯é¸) `admin_users`ï¼ˆå¾Œå°ç®¡ç†è€…ï¼‰

| æ¬„ä½          | å‹åˆ¥        | èªªæ˜                     |
| ----------- | --------- | ---------------------- |
| id          | uuid      | ä¸»éµ                     |
| email       | text      | ç™»å…¥å¸³è™Ÿ                   |
| role        | text      | superadmin / manager ç­‰ |
| created\_at | timestamp | å»ºç«‹æ™‚é–“                   |

---

## ğŸ§  è£œå……è¨­è¨ˆæ¦‚å¿µ

* æ‰€æœ‰é‡‘é¡æ¬„ä½å»ºè­°ç”¨ã€Œ**æ•´æ•¸è¡¨ç¤ºå°å¹£åˆ†**ã€ï¼Œé¿å…æµ®é»èª¤å·®ã€‚
* ä½¿ç”¨ `uuid` ç•¶ä½œä¸»éµæ–¹ä¾¿æ—¥å¾Œå¤šå€éƒ¨ç½²ã€åˆ†è¡¨èˆ‡è³‡æ–™åŒæ­¥ã€‚
* å¯é¸çš„åŠŸèƒ½å¦‚ï¼š**é€€è²¨ç”³è«‹è¡¨ã€å„ªæƒ åˆ¸ç³»çµ±ã€ç™¼ç¥¨è¨˜éŒ„è¡¨ã€è©•è«–ç³»çµ±** ç­‰å¯å¾ŒçºŒæ“´å……ã€‚
* Supabase æ”¯æ´ `RLSï¼ˆRow Level Securityï¼‰` å¯ç¢ºä¿ä¸åŒè§’è‰²å­˜å–æ¬Šé™ã€‚

---

## âœ… å¦‚æœä½ è¦å¯¦ä½œé€™å¥—ç³»çµ±ï¼Œæ¥ä¸‹ä¾†å¯ä»¥åšçš„äº‹ï¼š

1. æˆ‘è¦å¹«ä½ åŒ¯å‡ºä¸€ä»½ SQL å»ºè¡¨èªå¥ï¼ˆæ”¯æ´ Supabaseï¼‰
2. æˆ–æ˜¯å¹«ä½ åšæˆä¸€å¼µ**ER åœ–ï¼ˆEntity Relationship Diagramï¼‰**
3. æˆ–å¹«ä½ ç”¨ Prisma Schema / Drizzle Schema æè¿°å‡ºæ•´å€‹æ¨¡å‹
4. æˆ–å¹«ä½ å»ºä¸€ä»½ç¨®å­è³‡æ–™ Seeder Scriptï¼ˆè®“ä½ å‰ç«¯æ¸¬è©¦ç”¨ï¼‰

ä½ å¸Œæœ›æˆ‘æ¥ä¸‹ä¾†å¹«ä½ åšå“ªå€‹ï¼Ÿ
